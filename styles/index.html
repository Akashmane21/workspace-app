<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- Include stylesheet -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<!-- Main Quill library -->
<script src="//cdn.quilljs.com/1.3.6/quill.js"></script>
<script src="//cdn.quilljs.com/1.3.6/quill.min.js"></script>

<!-- Theme included stylesheets -->
<link href="//cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<link href="//cdn.quilljs.com/1.3.6/quill.bubble.css" rel="stylesheet">

<!-- Core build with no theme, formatting, non-essential modules -->
<link href="//cdn.quilljs.com/1.3.6/quill.core.css" rel="stylesheet">
<script src="//cdn.quilljs.com/1.3.6/quill.core.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/atom-one-light.min.css" integrity="sha512-o5v54Kh5PH0dgnf9ei0L+vMRsbm5fvIvnR/XkrZZjN4mqdaeH7PW66tumBoQVIaKNVrLCZiBEfHzRY4JJSMK/Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />

 <script>hljs.initHighlightingOnLoad();</script> 
</head>
<body>
    

<!-- Create the editor container -->
<div id="editor">
    <p>Hello World!</p>
    <p>Some initial <strong>bold</strong> text</p>
    <p><br></p>


    <pre class="dwdwdw">
      <code>
    console.log(`Hello, highlight.js!`);
    console.log(`Formatting Markdown code blocks!`);
    const add = (a: number, b: number)  a + b
    add(2, 3) // Returns 5
    </code>
    </pre>


  </div>

  <button onclick="show()">
    Get
  </button>


  <button onclick="get()">
    Submit
  </button>
  
  <!-- Include the Quill library -->
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  
  <!-- Initialize Quill editor -->
  <script>


var toolbarOptions = {
container:[
        [{ header: [1, 2, 3, 4, 5, 6, false] }],
        [{ font: [] }],
        ["bold", "italic", "underline", "strike", "link"], // toggled buttons
        [{ color: [] }, { background: [] }], // dropdown with defaults from theme
        ["blockquote", "code-block"],
        // ["link"],
    
        [{ size: ["small", false, "large", "huge"] }],
        [{ header: 1 }, { header: 2 }], // custom button values
        [{ list: "ordered" }, { list: "bullet" } , {list : "star"}],
        [{ script: "sub" }, { script: "super" }], // superscript/subscript
        [{ indent: "-1" }, { indent: "+1" }], // outdent/indent
        [{ direction: "rtl" }], // text direction
        [{ align: [] }],
        ["image"],
        ["video"],
        ["clean"],
      ],
      handlers: {
    // handlers object will be merged with default handlers object
    'link': function(value) {
      if (value) {
        console.log(value);
        // var href = prompt('Enter the URL');
        // this.quill.format('hr', true);
        this.quill.insertEmbed(index, 'video', '^video_url^');
      } else {
        console.log(value);
        this.quill.format('link', false);
      }
    }
  }                               // remove formatting button
  }

var quill = new Quill('#editor', {
  modules: {
    toolbar: toolbarOptions,
  },
  theme: 'snow',
});

var toolbar = quill.getModule('toolbar');
toolbar.addHandler('image', showImageUI);

async function show(){
  const data= await localStorage.getItem("QuillData")
    quill.root.innerHTML = '';
    document.getElementById('editor').innerHTML=data
quill.clipboard.dangerouslyPasteHTML(0,data);

}



function get(){
    window.delta=quill.root.innerHTML;
    console.log(delta);
    localStorage.setItem("QuillData",delta )
}

quill.on('text-change', () => {
    console.log('get html', quill.getHTML());
});

  </script>
</body>
</html>

